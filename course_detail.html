<!DOCTYPE html>
<html lang="en">

<head>
    <title>Course - Chi tiết khóa học</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Course Project">
    author: "Mr. Brian",
    img: "images/course_1.jpg",
    category: "IELTS",
    desc: "Lộ trình rõ ràng cho người mất gốc. Khóa học tập trung vào 4 kỹ năng Nghe, Nói, Đọc, Viết với các phương pháp
    làm bài hiệu quả.",
    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
    chapters: [
    { title: "Chương 1: Giới thiệu về IELTS", lessons: ["Cấu trúc bài thi IELTS", "Tiêu chí chấm điểm", "Lập kế hoạch
    học tập"] },
    { title: "Chương 2: Kỹ năng Nghe (Listening)", lessons: ["Các dạng bài phổ biến", "Mẹo nghe từ khóa", "Thực hành
    Section 1"] },
    { title: "Chương 3: Kỹ năng Đọc (Reading)", lessons: ["Kỹ thuật Skimming & Scanning", "Xử lý bài đọc dài", "Từ vựng
    học thuật"] }
    ]
    },
    "2": {
    title: "IELTS 6.0–6.5 cho sinh viên",
    price: "299.000đ",
    author: "Mr. Brian",
    img: "images/course_2.jpg",
    category: "IELTS",
    desc: "Học là lên điểm. Khóa học dành riêng cho sinh viên muốn đạt chứng chỉ IELTS để ra trường hoặc đi du học.",
    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
    chapters: [
    { title: "Chương 1: Tổng quan", lessons: ["Mục tiêu 6.5", "Tài liệu cần thiết"] },
    { title: "Chương 2: Kỹ năng Nói", lessons: ["Part 1: Giới thiệu bản thân", "Part 2: Mô tả chủ đề", "Part 3: Thảo
    luận chuyên sâu"] }
    ]
    },
    "3": {
    title: "Từ 4.0 lên 6.5 IELTS",
    price: "299.000đ",
    author: "Mr. Brian",
    img: "images/course_3.jpg",
    category: "IELTS",
    desc: "Công thức học ngắn – hiệu quả thật. Giúp bạn bứt phá điểm số trong thời gian ngắn nhất.",
    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
    chapters: [
    { title: "Chương 1: Xây dựng nền tảng", lessons: ["Ngữ pháp trọng tâm", "Phát âm chuẩn IPA"] },
    { title: "Chương 2: Kỹ năng Viết (Writing)", lessons: ["Task 1: Mô tả biểu đồ", "Task 2: Nghị luận xã hội"] }
    ]
    },
    "4": {
    title: "Lập trình Python cơ bản",
    price: "299.000đ",
    author: "Mr. Brian",
    img: "images/course_4.jpg",
    category: "Lập trình",
    desc: "Học lập trình Python từ con số 0. Phù hợp for người mới bắt đầu muốn tìm hiểu về lập trình.",
    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
    chapters: [
    { title: "Chương 1: Cài đặt môi trường", lessons: ["Cài đặt Python & VS Code", "Chạy chương trình Hello World"] },
    { title: "Chương 2: Biến và Kiểu dữ liệu", lessons: ["Số, Chuỗi, Boolean", "List, Tuple, Dictionary"] }
    ]
    },
    "5": {
    title: "Lập trình HTML cơ bản",
    price: "299.000đ",
    author: "Mr. Brian",
    img: "images/course_5.jpg",
    category: "Lập trình",
    desc: "Xây dựng nền tảng web vững chắc with HTML và CSS.",
    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
    chapters: [
    { title: "Chương 1: Cấu trúc HTML", lessons: ["Các thẻ cơ bản", "Form và Input", "Semantic HTML"] },
    { title: "Chương 2: CSS cơ bản", lessons: ["Selector và Property", "Box Model", "Flexbox"] }
    ]
    },
    "6": {
    title: "Photoshop cơ bản",
    price: "299.000đ",
    author: "Mr. Brian",
    img: "images/course_6.jpg",
    category: "Thiết kế",
    desc: "Làm chủ công cụ thiết kế đồ họa phổ biến nhất thế giới.",
    video: "https://www.youtube.com/embed/dQw4w9WgXcQ",
    chapters: [
    { title: "Chương 1: Làm quen giao diện", lessons: ["Công cụ Selection", "Làm việc với Layer"] },
    { title: "Chương 2: Chỉnh sửa ảnh", lessons: ["Cắt ghép cơ bản", "Chỉnh màu sắc", "Xóa vật thể thừa"] }
    ]
    }
    };

    // Get course ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const courseId = urlParams.get('id');
    let currentVideoUrl = "";

    if (courseId && courses[courseId]) {
    const course = courses[courseId];
    document.getElementById('course_title').innerText = course.title;
    document.getElementById('breadcrumb_course').innerText = course.title;
    document.getElementById('breadcrumb_cat').innerText = course.category;
    document.getElementById('course_description').innerText = course.desc;
    document.getElementById('course_price').innerText = course.price;
    document.getElementById('course_author').innerText = course.author;
    document.getElementById('course_img').src = course.img;
    currentVideoUrl = course.video;

    // Populate Accordion
    const accordionContainer = document.getElementById('course_accordion_container');
    if (course.chapters) {
    course.chapters.forEach((chapter, index) => {
    const item = document.createElement('div');
    item.className = 'accordion_item';
    item.innerHTML = `
    <div class="accordion_header" onclick="toggleAccordion(this)">
        <span>${chapter.title}</span>
        <i class="fas fa-chevron-down"></i>
    </div>
    <div class="accordion_content">
        ${chapter.lessons.map(lesson => `
        <div class="lesson_item">
            <span><i class="far fa-play-circle"></i> ${lesson}</span>
            <span style="color: #6a6f73;">05:00</span>
        </div>
        `).join('')}
    </div>
    `;
    accordionContainer.appendChild(item);
    });
    }

    // Populate Recommendations (Smart Logic)
    const recGrid = document.getElementById('recommendations_grid');
    const currentCategory = course.category;

    // Filter and Sort: Same category first, then others, limit to 4
    let recommendedList = Object.keys(courses)
    .filter(id => id !== courseId)
    .map(id => ({ id, ...courses[id] }))
    .sort((a, b) => {
    if (a.category === currentCategory && b.category !== currentCategory) return -1;
    if (a.category !== currentCategory && b.category === currentCategory) return 1;
    return 0;
    })
    .slice(0, 4);

    recommendedList.forEach(rec => {
    const card = document.createElement('div');
    card.className = 'recommendation_card';
    card.onclick = () => window.location.href = `course_detail.html?id=${rec.id}`;
    card.innerHTML = `
    <img src="${rec.img}" class="rec_img" alt="${rec.title}">
    <div class="rec_content">
        <div class="rec_title">${rec.title}</div>
        <div class="rec_author">${rec.author}</div>
        <div class="rec_price">${rec.price}</div>
    </div>
    `;
    recGrid.appendChild(card);
    });
    }

    function toggleAccordion(header) {
    const content = header.nextElementSibling;
    const icon = header.querySelector('i');
    if (content.style.display === 'block') {
    content.style.display = 'none';
    icon.className = 'fas fa-chevron-down';
    } else {
    content.style.display = 'block';
    icon.className = 'fas fa-chevron-up';
    }
    }

    function openVideo() {
    document.getElementById('video_modal').style.display = 'flex';
    document.getElementById('modal_video_container').innerHTML = `<iframe width="100%" height="100%"
        src="${currentVideoUrl}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
    }

    function closeVideo() {
    document.getElementById('video_modal').style.display = 'none';
    document.getElementById('modal_video_container').innerHTML = '';
    }

    // Sticky Sidebar Logic
    $(window).scroll(function () {
    const sidebar = $('#sidebar_card');
    const scroll = $(window).scrollTop();
    if (scroll > 100 && window.innerWidth > 991) {
    sidebar.addClass('sticky');
    } else {
    sidebar.removeClass('sticky');
    }
    });
    </script>

    </body>

</html>